Ballerina File(0,2602)
  IMPORT_DECLARATION(0,22)
    PsiElement(import)('import')(0,6)
    PsiWhiteSpace(' ')(6,7)
    ORG_NAME(7,16)
      PsiElement(identifier)('ballerina')(7,16)
    PsiElement(/)('/')(16,17)
    COMPLETE_PACKAGE_NAME(17,21)
      PACKAGE_NAME(17,21)
        PsiElement(identifier)('http')(17,21)
    PsiElement(;)(';')(21,22)
  PsiWhiteSpace('\n')(22,23)
  IMPORT_DECLARATION(23,43)
    PsiElement(import)('import')(23,29)
    PsiWhiteSpace(' ')(29,30)
    ORG_NAME(30,39)
      PsiElement(identifier)('ballerina')(30,39)
    PsiElement(/)('/')(39,40)
    COMPLETE_PACKAGE_NAME(40,42)
      PACKAGE_NAME(40,42)
        PsiElement(identifier)('io')(40,42)
    PsiElement(;)(';')(42,43)
  PsiWhiteSpace('\n')(43,44)
  IMPORT_DECLARATION(44,65)
    PsiElement(import)('import')(44,50)
    PsiWhiteSpace(' ')(50,51)
    ORG_NAME(51,60)
      PsiElement(identifier)('ballerina')(51,60)
    PsiElement(/)('/')(60,61)
    COMPLETE_PACKAGE_NAME(61,64)
      PACKAGE_NAME(61,64)
        PsiElement(identifier)('log')(61,64)
    PsiElement(;)(';')(64,65)
  PsiWhiteSpace('\n')(65,66)
  IMPORT_DECLARATION(66,96)
    PsiElement(import)('import')(66,72)
    PsiWhiteSpace(' ')(72,73)
    ORG_NAME(73,82)
      PsiElement(identifier)('ballerina')(73,82)
    PsiElement(/)('/')(82,83)
    COMPLETE_PACKAGE_NAME(83,95)
      PACKAGE_NAME(83,95)
        PsiElement(identifier)('transactions')(83,95)
    PsiElement(;)(';')(95,96)
  PsiWhiteSpace('\n\n')(96,98)
  PsiComment(LINE_COMMENT)('// This service is a participant in the distributed transaction. It will get')(98,174)
  PsiWhiteSpace('\n')(174,175)
  PsiComment(LINE_COMMENT)('// infected when it receives a transaction context from the participant. The')(175,251)
  PsiWhiteSpace('\n')(251,252)
  PsiComment(LINE_COMMENT)('// transaction context, in the HTTP case, will be passed in as custom HTTP headers.')(252,335)
  PsiWhiteSpace('\n')(335,336)
  DEFINITION(336,2133)
    ANNOTATION_ATTACHMENT(336,387)
      PsiElement(@)('@')(336,337)
      NAME_REFERENCE(337,355)
        PACKAGE_REFERENCE(337,342)
          PsiElement(identifier)('http')(337,341)
          PsiElement(:)(':')(341,342)
        PsiElement(identifier)('ServiceConfig')(342,355)
      PsiWhiteSpace(' ')(355,356)
      RECORD_LITERAL(356,387)
        PsiElement({)('{')(356,357)
        PsiWhiteSpace('\n    ')(357,362)
        RECORD_LITERAL_BODY(362,385)
          RECORD_KEY_VALUE(362,385)
            RECORD_KEY(362,370)
              VARIABLE_REFERENCE_EXPRESSION(362,370)
                SIMPLE_VARIABLE_REFERENCE(362,370)
                  NAME_REFERENCE(362,370)
                    PsiElement(identifier)('basePath')(362,370)
            PsiElement(:)(':')(370,371)
            PsiWhiteSpace(' ')(371,372)
            SIMPLE_LITERAL_EXPRESSION(372,385)
              SIMPLE_LITERAL(372,385)
                PsiElement(QUOTED_STRING_LITERAL)('"/stockquote"')(372,385)
        PsiWhiteSpace('\n')(385,386)
        PsiElement(})('}')(386,387)
    PsiWhiteSpace('\n')(387,388)
    DEFINITION(388,2133)
      SERVICE_DEFINITION(388,2133)
        PsiElement(service)('service')(388,395)
        PsiWhiteSpace(' ')(395,396)
        PsiElement(identifier)('ParticipantService')(396,414)
        PsiWhiteSpace(' ')(414,415)
        PsiElement(on)('on')(415,417)
        PsiWhiteSpace(' ')(417,418)
        EXPRESSION_LIST(418,441)
          TYPE_INIT_EXPRESSION(418,441)
            INIT_WITH_TYPE(418,441)
              PsiElement(new)('new')(418,421)
              PsiWhiteSpace(' ')(421,422)
              USER_DEFINE_TYPE_NAME(422,435)
                NAME_REFERENCE(422,435)
                  PACKAGE_REFERENCE(422,427)
                    PsiElement(identifier)('http')(422,426)
                    PsiElement(:)(':')(426,427)
                  PsiElement(identifier)('Listener')(427,435)
              PsiElement(()('(')(435,436)
              INVOCATION_ARG_LIST(436,440)
                INVOCATION_ARG(436,440)
                  SIMPLE_LITERAL_EXPRESSION(436,440)
                    SIMPLE_LITERAL(436,440)
                      INTEGER_LITERAL(436,440)
                        PsiElement(DECIMAL_INTEGER_LITERAL)('8889')(436,440)
              PsiElement())(')')(440,441)
        PsiWhiteSpace(' ')(441,442)
        SERVICE_BODY(442,2133)
          PsiElement({)('{')(442,443)
          PsiWhiteSpace('\n\n    ')(443,449)
          SERVICE_BODY_MEMBER(449,2131)
            OBJECT_FUNCTION_DEFINITION(449,2131)
              ANNOTATION_ATTACHMENT(449,501)
                PsiElement(@)('@')(449,450)
                NAME_REFERENCE(450,469)
                  PACKAGE_REFERENCE(450,455)
                    PsiElement(identifier)('http')(450,454)
                    PsiElement(:)(':')(454,455)
                  PsiElement(identifier)('ResourceConfig')(455,469)
                PsiWhiteSpace(' ')(469,470)
                RECORD_LITERAL(470,501)
                  PsiElement({)('{')(470,471)
                  PsiWhiteSpace('\n        ')(471,480)
                  RECORD_LITERAL_BODY(480,495)
                    RECORD_KEY_VALUE(480,495)
                      RECORD_KEY(480,484)
                        VARIABLE_REFERENCE_EXPRESSION(480,484)
                          SIMPLE_VARIABLE_REFERENCE(480,484)
                            NAME_REFERENCE(480,484)
                              PsiElement(identifier)('path')(480,484)
                      PsiElement(:)(':')(484,485)
                      PsiWhiteSpace(' ')(485,486)
                      SIMPLE_LITERAL_EXPRESSION(486,495)
                        SIMPLE_LITERAL(486,495)
                          PsiElement(QUOTED_STRING_LITERAL)('"/update"')(486,495)
                  PsiWhiteSpace('\n    ')(495,500)
                  PsiElement(})('}')(500,501)
              PsiWhiteSpace('\n    ')(501,506)
              ANNOTATION_ATTACHMENT(506,618)
                PsiElement(@)('@')(506,507)
                NAME_REFERENCE(507,531)
                  PACKAGE_REFERENCE(507,520)
                    PsiElement(identifier)('transactions')(507,519)
                    PsiElement(:)(':')(519,520)
                  PsiElement(identifier)('Participant')(520,531)
                PsiWhiteSpace(' ')(531,532)
                RECORD_LITERAL(532,618)
                  PsiElement({)('{')(532,533)
                  PsiWhiteSpace('\n        ')(533,542)
                  RECORD_LITERAL_BODY(542,612)
                    RECORD_KEY_VALUE(542,573)
                      RECORD_KEY(542,550)
                        VARIABLE_REFERENCE_EXPRESSION(542,550)
                          SIMPLE_VARIABLE_REFERENCE(542,550)
                            NAME_REFERENCE(542,550)
                              PsiElement(identifier)('oncommit')(542,550)
                      PsiElement(:)(':')(550,551)
                      VARIABLE_REFERENCE_EXPRESSION(551,573)
                        SIMPLE_VARIABLE_REFERENCE(551,573)
                          NAME_REFERENCE(551,573)
                            PsiElement(identifier)('printParticipantCommit')(551,573)
                    PsiElement(,)(',')(573,574)
                    PsiWhiteSpace('\n        ')(574,583)
                    RECORD_KEY_VALUE(583,612)
                      RECORD_KEY(583,590)
                        VARIABLE_REFERENCE_EXPRESSION(583,590)
                          SIMPLE_VARIABLE_REFERENCE(583,590)
                            NAME_REFERENCE(583,590)
                              PsiElement(identifier)('onabort')(583,590)
                      PsiElement(:)(':')(590,591)
                      VARIABLE_REFERENCE_EXPRESSION(591,612)
                        SIMPLE_VARIABLE_REFERENCE(591,612)
                          NAME_REFERENCE(591,612)
                            PsiElement(identifier)('printParticipantAbort')(591,612)
                  PsiWhiteSpace('\n    ')(612,617)
                  PsiElement(})('}')(617,618)
              PsiWhiteSpace('\n    ')(618,623)
              PsiElement(resource)('resource')(623,631)
              PsiWhiteSpace(' ')(631,632)
              PsiElement(function)('function')(632,640)
              PsiWhiteSpace(' ')(640,641)
              CALLABLE_UNIT_SIGNATURE(641,693)
                ANY_IDENTIFIER_NAME(641,657)
                  PsiElement(identifier)('updateStockQuote')(641,657)
                PsiElement(()('(')(657,658)
                FORMAL_PARAMETER_LIST(658,692)
                  PARAMETER(658,674)
                    PARAMETER_WITH_TYPE(658,674)
                      SIMPLE_TYPE_NAME(658,669)
                        REFERENCE_TYPE_NAME(658,669)
                          USER_DEFINE_TYPE_NAME(658,669)
                            NAME_REFERENCE(658,669)
                              PACKAGE_REFERENCE(658,663)
                                PsiElement(identifier)('http')(658,662)
                                PsiElement(:)(':')(662,663)
                              PsiElement(identifier)('Caller')(663,669)
                      PsiWhiteSpace(' ')(669,670)
                      PsiElement(identifier)('conn')(670,674)
                  PsiElement(,)(',')(674,675)
                  PsiWhiteSpace(' ')(675,676)
                  PARAMETER(676,692)
                    PARAMETER_WITH_TYPE(676,692)
                      SIMPLE_TYPE_NAME(676,688)
                        REFERENCE_TYPE_NAME(676,688)
                          USER_DEFINE_TYPE_NAME(676,688)
                            NAME_REFERENCE(676,688)
                              PACKAGE_REFERENCE(676,681)
                                PsiElement(identifier)('http')(676,680)
                                PsiElement(:)(':')(680,681)
                              PsiElement(identifier)('Request')(681,688)
                      PsiWhiteSpace(' ')(688,689)
                      PsiElement(identifier)('req')(689,692)
                PsiElement())(')')(692,693)
              PsiWhiteSpace(' ')(693,694)
              CALLABLE_UNIT_BODY(694,2131)
                PsiElement({)('{')(694,695)
                PsiWhiteSpace('\n        ')(695,704)
                STATEMENT(704,756)
                  EXPRESSION_STMT(704,756)
                    VARIABLE_REFERENCE_EXPRESSION(704,755)
                      FUNCTION_INVOCATION_REFERENCE(704,755)
                        FUNCTION_INVOCATION(704,755)
                          FUNCTION_NAME_REFERENCE(704,717)
                            PACKAGE_REFERENCE(704,708)
                              PsiElement(identifier)('log')(704,707)
                              PsiElement(:)(':')(707,708)
                            ANY_IDENTIFIER_NAME(708,717)
                              PsiElement(identifier)('printInfo')(708,717)
                          PsiElement(()('(')(717,718)
                          INVOCATION_ARG_LIST(718,754)
                            INVOCATION_ARG(718,754)
                              SIMPLE_LITERAL_EXPRESSION(718,754)
                                SIMPLE_LITERAL(718,754)
                                  PsiElement(QUOTED_STRING_LITERAL)('"Received update stockquote request"')(718,754)
                          PsiElement())(')')(754,755)
                    PsiElement(;)(';')(755,756)
                PsiWhiteSpace('\n        ')(756,765)
                STATEMENT(765,789)
                  VARIABLE_DEFINITION_STATEMENT(765,789)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(765,789)
                      SIMPLE_TYPE_NAME(765,778)
                        REFERENCE_TYPE_NAME(765,778)
                          USER_DEFINE_TYPE_NAME(765,778)
                            NAME_REFERENCE(765,778)
                              PACKAGE_REFERENCE(765,770)
                                PsiElement(identifier)('http')(765,769)
                                PsiElement(:)(':')(769,770)
                              PsiElement(identifier)('Response')(770,778)
                      PsiWhiteSpace(' ')(778,779)
                      BINDING_PATTERN(779,782)
                        PsiElement(identifier)('res')(779,782)
                      PsiWhiteSpace(' ')(782,783)
                      PsiElement(=)('=')(783,784)
                      PsiWhiteSpace(' ')(784,785)
                      TYPE_INIT_EXPRESSION(785,788)
                        INIT_WITHOUT_TYPE(785,788)
                          PsiElement(new)('new')(785,788)
                      PsiElement(;)(';')(788,789)
                PsiWhiteSpace('\n\n        ')(789,799)
                PsiComment(LINE_COMMENT)('// At the beginning of the `transaction` statement, since a transaction')(799,870)
                PsiWhiteSpace('\n        ')(870,879)
                PsiComment(LINE_COMMENT)('// context has been received, this service will register with the')(879,944)
                PsiWhiteSpace('\n        ')(944,953)
                PsiComment(LINE_COMMENT)('// initiator as a participant.')(953,983)
                PsiWhiteSpace('\n\n        ')(983,993)
                PsiComment(LINE_COMMENT)('// Print the current transaction ID')(993,1028)
                PsiWhiteSpace('\n        ')(1028,1037)
                STATEMENT(1037,1139)
                  EXPRESSION_STMT(1037,1139)
                    VARIABLE_REFERENCE_EXPRESSION(1037,1138)
                      FUNCTION_INVOCATION_REFERENCE(1037,1138)
                        FUNCTION_INVOCATION(1037,1138)
                          FUNCTION_NAME_REFERENCE(1037,1050)
                            PACKAGE_REFERENCE(1037,1041)
                              PsiElement(identifier)('log')(1037,1040)
                              PsiElement(:)(':')(1040,1041)
                            ANY_IDENTIFIER_NAME(1041,1050)
                              PsiElement(identifier)('printInfo')(1041,1050)
                          PsiElement(()('(')(1050,1051)
                          INVOCATION_ARG_LIST(1051,1137)
                            INVOCATION_ARG(1051,1137)
                              BINARY_ADD_SUB_EXPRESSION(1051,1137)
                                SIMPLE_LITERAL_EXPRESSION(1051,1073)
                                  SIMPLE_LITERAL(1051,1073)
                                    PsiElement(QUOTED_STRING_LITERAL)('"Joined transaction: "')(1051,1073)
                                PsiWhiteSpace(' ')(1073,1074)
                                PsiElement(+)('+')(1074,1075)
                                PsiWhiteSpace('\n                       ')(1075,1099)
                                VARIABLE_REFERENCE_EXPRESSION(1099,1137)
                                  FUNCTION_INVOCATION_REFERENCE(1099,1137)
                                    FUNCTION_INVOCATION(1099,1137)
                                      FUNCTION_NAME_REFERENCE(1099,1135)
                                        PACKAGE_REFERENCE(1099,1112)
                                          PsiElement(identifier)('transactions')(1099,1111)
                                          PsiElement(:)(':')(1111,1112)
                                        ANY_IDENTIFIER_NAME(1112,1135)
                                          PsiElement(identifier)('getCurrentTransactionId')(1112,1135)
                                      PsiElement(()('(')(1135,1136)
                                      PsiElement())(')')(1136,1137)
                          PsiElement())(')')(1137,1138)
                    PsiElement(;)(';')(1138,1139)
                PsiWhiteSpace('\n\n        ')(1139,1149)
                STATEMENT(1149,1194)
                  VARIABLE_DEFINITION_STATEMENT(1149,1194)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1149,1194)
                      PsiElement(var)('var')(1149,1152)
                      PsiWhiteSpace(' ')(1152,1153)
                      BINDING_PATTERN(1153,1162)
                        PsiElement(identifier)('updateReq')(1153,1162)
                      PsiWhiteSpace(' ')(1162,1163)
                      PsiElement(=)('=')(1163,1164)
                      PsiWhiteSpace(' ')(1164,1165)
                      UNARY_EXPRESSION(1165,1193)
                        PsiElement(untaint)('untaint')(1165,1172)
                        PsiWhiteSpace(' ')(1172,1173)
                        VARIABLE_REFERENCE_EXPRESSION(1173,1193)
                          INVOCATION_REFERENCE(1173,1193)
                            SIMPLE_VARIABLE_REFERENCE(1173,1176)
                              NAME_REFERENCE(1173,1176)
                                PsiElement(identifier)('req')(1173,1176)
                            INVOCATION(1176,1193)
                              PsiElement(.)('.')(1176,1177)
                              ANY_IDENTIFIER_NAME(1177,1191)
                                PsiElement(identifier)('getJsonPayload')(1177,1191)
                              PsiElement(()('(')(1191,1192)
                              PsiElement())(')')(1192,1193)
                      PsiElement(;)(';')(1193,1194)
                PsiWhiteSpace('\n        ')(1194,1203)
                STATEMENT(1203,1843)
                  IF_ELSE_STATEMENT(1203,1843)
                    IF_CLAUSE(1203,1645)
                      PsiElement(if)('if')(1203,1205)
                      PsiWhiteSpace(' ')(1205,1206)
                      BRACED_OR_TUPLE_EXPRESSION(1206,1225)
                        TUPLE_LITERAL(1206,1225)
                          PsiElement(()('(')(1206,1207)
                          TYPE_TEST_EXPRESSION(1207,1224)
                            VARIABLE_REFERENCE_EXPRESSION(1207,1216)
                              SIMPLE_VARIABLE_REFERENCE(1207,1216)
                                NAME_REFERENCE(1207,1216)
                                  PsiElement(identifier)('updateReq')(1207,1216)
                            PsiWhiteSpace(' ')(1216,1217)
                            PsiElement(is)('is')(1217,1219)
                            PsiWhiteSpace(' ')(1219,1220)
                            SIMPLE_TYPE_NAME(1220,1224)
                              REFERENCE_TYPE_NAME(1220,1224)
                                BUILT_IN_REFERENCE_TYPE_NAME(1220,1224)
                                  JSON_TYPE_NAME(1220,1224)
                                    PsiElement(json)('json')(1220,1224)
                          PsiElement())(')')(1224,1225)
                      PsiWhiteSpace(' ')(1225,1226)
                      PsiElement({)('{')(1226,1227)
                      PsiWhiteSpace('\n            ')(1227,1240)
                      BLOCK(1240,1635)
                        STATEMENT(1240,1459)
                          VARIABLE_DEFINITION_STATEMENT(1240,1459)
                            VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1240,1459)
                              SIMPLE_TYPE_NAME(1240,1246)
                                VALUE_TYPE_NAME(1240,1246)
                                  PsiElement(string)('string')(1240,1246)
                              PsiWhiteSpace(' ')(1246,1247)
                              BINDING_PATTERN(1247,1250)
                                PsiElement(identifier)('msg')(1247,1250)
                              PsiWhiteSpace(' ')(1250,1251)
                              PsiElement(=)('=')(1251,1252)
                              PsiWhiteSpace('\n                ')(1252,1269)
                              VARIABLE_REFERENCE_EXPRESSION(1269,1458)
                                FUNCTION_INVOCATION_REFERENCE(1269,1458)
                                  FUNCTION_INVOCATION(1269,1458)
                                    FUNCTION_NAME_REFERENCE(1269,1279)
                                      PACKAGE_REFERENCE(1269,1272)
                                        PsiElement(identifier)('io')(1269,1271)
                                        PsiElement(:)(':')(1271,1272)
                                      ANY_IDENTIFIER_NAME(1272,1279)
                                        PsiElement(identifier)('sprintf')(1272,1279)
                                    PsiElement(()('(')(1279,1280)
                                    INVOCATION_ARG_LIST(1280,1457)
                                      INVOCATION_ARG(1280,1366)
                                        SIMPLE_LITERAL_EXPRESSION(1280,1366)
                                          SIMPLE_LITERAL(1280,1366)
                                            PsiElement(QUOTED_STRING_LITERAL)('"Update stock quote request received.\n                            symbol:%s, price:%s"')(1280,1366)
                                      PsiElement(,)(',')(1366,1367)
                                      PsiWhiteSpace('\n                            ')(1367,1396)
                                      INVOCATION_ARG(1396,1412)
                                        VARIABLE_REFERENCE_EXPRESSION(1396,1412)
                                          FIELD_VARIABLE_REFERENCE(1396,1412)
                                            SIMPLE_VARIABLE_REFERENCE(1396,1405)
                                              NAME_REFERENCE(1396,1405)
                                                PsiElement(identifier)('updateReq')(1396,1405)
                                            FIELD(1405,1412)
                                              PsiElement(.)('.')(1405,1406)
                                              PsiElement(identifier)('symbol')(1406,1412)
                                      PsiElement(,)(',')(1412,1413)
                                      PsiWhiteSpace('\n                            ')(1413,1442)
                                      INVOCATION_ARG(1442,1457)
                                        VARIABLE_REFERENCE_EXPRESSION(1442,1457)
                                          FIELD_VARIABLE_REFERENCE(1442,1457)
                                            SIMPLE_VARIABLE_REFERENCE(1442,1451)
                                              NAME_REFERENCE(1442,1451)
                                                PsiElement(identifier)('updateReq')(1442,1451)
                                            FIELD(1451,1457)
                                              PsiElement(.)('.')(1451,1452)
                                              PsiElement(identifier)('price')(1452,1457)
                                    PsiElement())(')')(1457,1458)
                              PsiElement(;)(';')(1458,1459)
                        PsiWhiteSpace('\n            ')(1459,1472)
                        STATEMENT(1472,1491)
                          EXPRESSION_STMT(1472,1491)
                            VARIABLE_REFERENCE_EXPRESSION(1472,1490)
                              FUNCTION_INVOCATION_REFERENCE(1472,1490)
                                FUNCTION_INVOCATION(1472,1490)
                                  FUNCTION_NAME_REFERENCE(1472,1485)
                                    PACKAGE_REFERENCE(1472,1476)
                                      PsiElement(identifier)('log')(1472,1475)
                                      PsiElement(:)(':')(1475,1476)
                                    ANY_IDENTIFIER_NAME(1476,1485)
                                      PsiElement(identifier)('printInfo')(1476,1485)
                                  PsiElement(()('(')(1485,1486)
                                  INVOCATION_ARG_LIST(1486,1489)
                                    INVOCATION_ARG(1486,1489)
                                      VARIABLE_REFERENCE_EXPRESSION(1486,1489)
                                        SIMPLE_VARIABLE_REFERENCE(1486,1489)
                                          NAME_REFERENCE(1486,1489)
                                            PsiElement(identifier)('msg')(1486,1489)
                                  PsiElement())(')')(1489,1490)
                            PsiElement(;)(';')(1490,1491)
                        PsiWhiteSpace('\n\n            ')(1491,1505)
                        STATEMENT(1505,1552)
                          VARIABLE_DEFINITION_STATEMENT(1505,1552)
                            VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1505,1552)
                              SIMPLE_TYPE_NAME(1505,1509)
                                REFERENCE_TYPE_NAME(1505,1509)
                                  BUILT_IN_REFERENCE_TYPE_NAME(1505,1509)
                                    JSON_TYPE_NAME(1505,1509)
                                      PsiElement(json)('json')(1505,1509)
                              PsiWhiteSpace(' ')(1509,1510)
                              BINDING_PATTERN(1510,1517)
                                PsiElement(identifier)('jsonRes')(1510,1517)
                              PsiWhiteSpace(' ')(1517,1518)
                              PsiElement(=)('=')(1518,1519)
                              PsiWhiteSpace(' ')(1519,1520)
                              RECORD_LITERAL_EXPRESSION(1520,1551)
                                RECORD_LITERAL(1520,1551)
                                  PsiElement({)('{')(1520,1521)
                                  PsiWhiteSpace(' ')(1521,1522)
                                  RECORD_LITERAL_BODY(1522,1549)
                                    RECORD_KEY_VALUE(1522,1549)
                                      RECORD_KEY(1522,1531)
                                        SIMPLE_LITERAL_EXPRESSION(1522,1531)
                                          SIMPLE_LITERAL(1522,1531)
                                            PsiElement(QUOTED_STRING_LITERAL)('"message"')(1522,1531)
                                      PsiElement(:)(':')(1531,1532)
                                      PsiWhiteSpace(' ')(1532,1533)
                                      SIMPLE_LITERAL_EXPRESSION(1533,1549)
                                        SIMPLE_LITERAL(1533,1549)
                                          PsiElement(QUOTED_STRING_LITERAL)('"updating stock"')(1533,1549)
                                  PsiWhiteSpace(' ')(1549,1550)
                                  PsiElement(})('}')(1550,1551)
                              PsiElement(;)(';')(1551,1552)
                        PsiWhiteSpace('\n            ')(1552,1565)
                        STATEMENT(1565,1594)
                          ASSIGNMENT_STATEMENT(1565,1594)
                            FIELD_VARIABLE_REFERENCE(1565,1579)
                              SIMPLE_VARIABLE_REFERENCE(1565,1568)
                                NAME_REFERENCE(1565,1568)
                                  PsiElement(identifier)('res')(1565,1568)
                              FIELD(1568,1579)
                                PsiElement(.)('.')(1568,1569)
                                PsiElement(identifier)('statusCode')(1569,1579)
                            PsiWhiteSpace(' ')(1579,1580)
                            PsiElement(=)('=')(1580,1581)
                            PsiWhiteSpace(' ')(1581,1582)
                            VARIABLE_REFERENCE_EXPRESSION(1582,1593)
                              SIMPLE_VARIABLE_REFERENCE(1582,1593)
                                NAME_REFERENCE(1582,1593)
                                  PACKAGE_REFERENCE(1582,1587)
                                    PsiElement(identifier)('http')(1582,1586)
                                    PsiElement(:)(':')(1586,1587)
                                  PsiElement(identifier)('OK_200')(1587,1593)
                            PsiElement(;)(';')(1593,1594)
                        PsiWhiteSpace('\n            ')(1594,1607)
                        STATEMENT(1607,1635)
                          EXPRESSION_STMT(1607,1635)
                            VARIABLE_REFERENCE_EXPRESSION(1607,1634)
                              INVOCATION_REFERENCE(1607,1634)
                                SIMPLE_VARIABLE_REFERENCE(1607,1610)
                                  NAME_REFERENCE(1607,1610)
                                    PsiElement(identifier)('res')(1607,1610)
                                INVOCATION(1610,1634)
                                  PsiElement(.)('.')(1610,1611)
                                  ANY_IDENTIFIER_NAME(1611,1625)
                                    PsiElement(identifier)('setJsonPayload')(1611,1625)
                                  PsiElement(()('(')(1625,1626)
                                  INVOCATION_ARG_LIST(1626,1633)
                                    INVOCATION_ARG(1626,1633)
                                      VARIABLE_REFERENCE_EXPRESSION(1626,1633)
                                        SIMPLE_VARIABLE_REFERENCE(1626,1633)
                                          NAME_REFERENCE(1626,1633)
                                            PsiElement(identifier)('jsonRes')(1626,1633)
                                  PsiElement())(')')(1633,1634)
                            PsiElement(;)(';')(1634,1635)
                      PsiWhiteSpace('\n        ')(1635,1644)
                      PsiElement(})('}')(1644,1645)
                    PsiWhiteSpace(' ')(1645,1646)
                    ELSE_CLAUSE(1646,1843)
                      PsiElement(else)('else')(1646,1650)
                      PsiWhiteSpace(' ')(1650,1651)
                      PsiElement({)('{')(1651,1652)
                      PsiWhiteSpace('\n            ')(1652,1665)
                      BLOCK(1665,1833)
                        STATEMENT(1665,1713)
                          ASSIGNMENT_STATEMENT(1665,1713)
                            FIELD_VARIABLE_REFERENCE(1665,1679)
                              SIMPLE_VARIABLE_REFERENCE(1665,1668)
                                NAME_REFERENCE(1665,1668)
                                  PsiElement(identifier)('res')(1665,1668)
                              FIELD(1668,1679)
                                PsiElement(.)('.')(1668,1669)
                                PsiElement(identifier)('statusCode')(1669,1679)
                            PsiWhiteSpace(' ')(1679,1680)
                            PsiElement(=)('=')(1680,1681)
                            PsiWhiteSpace(' ')(1681,1682)
                            VARIABLE_REFERENCE_EXPRESSION(1682,1712)
                              SIMPLE_VARIABLE_REFERENCE(1682,1712)
                                NAME_REFERENCE(1682,1712)
                                  PACKAGE_REFERENCE(1682,1687)
                                    PsiElement(identifier)('http')(1682,1686)
                                    PsiElement(:)(':')(1686,1687)
                                  PsiElement(identifier)('INTERNAL_SERVER_ERROR_500')(1687,1712)
                            PsiElement(;)(';')(1712,1713)
                        PsiWhiteSpace('\n            ')(1713,1726)
                        STATEMENT(1726,1761)
                          EXPRESSION_STMT(1726,1761)
                            VARIABLE_REFERENCE_EXPRESSION(1726,1760)
                              INVOCATION_REFERENCE(1726,1760)
                                SIMPLE_VARIABLE_REFERENCE(1726,1729)
                                  NAME_REFERENCE(1726,1729)
                                    PsiElement(identifier)('res')(1726,1729)
                                INVOCATION(1729,1760)
                                  PsiElement(.)('.')(1729,1730)
                                  ANY_IDENTIFIER_NAME(1730,1740)
                                    PsiElement(identifier)('setPayload')(1730,1740)
                                  PsiElement(()('(')(1740,1741)
                                  INVOCATION_ARG_LIST(1741,1759)
                                    INVOCATION_ARG(1741,1759)
                                      VARIABLE_REFERENCE_EXPRESSION(1741,1759)
                                        INVOCATION_REFERENCE(1741,1759)
                                          SIMPLE_VARIABLE_REFERENCE(1741,1750)
                                            NAME_REFERENCE(1741,1750)
                                              PsiElement(identifier)('updateReq')(1741,1750)
                                          INVOCATION(1750,1759)
                                            PsiElement(.)('.')(1750,1751)
                                            ANY_IDENTIFIER_NAME(1751,1757)
                                              PsiElement(identifier)('reason')(1751,1757)
                                            PsiElement(()('(')(1757,1758)
                                            PsiElement())(')')(1758,1759)
                                  PsiElement())(')')(1759,1760)
                            PsiElement(;)(';')(1760,1761)
                        PsiWhiteSpace('\n            ')(1761,1774)
                        STATEMENT(1774,1833)
                          EXPRESSION_STMT(1774,1833)
                            VARIABLE_REFERENCE_EXPRESSION(1774,1832)
                              FUNCTION_INVOCATION_REFERENCE(1774,1832)
                                FUNCTION_INVOCATION(1774,1832)
                                  FUNCTION_NAME_REFERENCE(1774,1788)
                                    PACKAGE_REFERENCE(1774,1778)
                                      PsiElement(identifier)('log')(1774,1777)
                                      PsiElement(:)(':')(1777,1778)
                                    ANY_IDENTIFIER_NAME(1778,1788)
                                      PsiElement(identifier)('printError')(1778,1788)
                                  PsiElement(()('(')(1788,1789)
                                  INVOCATION_ARG_LIST(1789,1831)
                                    INVOCATION_ARG(1789,1814)
                                      SIMPLE_LITERAL_EXPRESSION(1789,1814)
                                        SIMPLE_LITERAL(1789,1814)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Payload error occurred!"')(1789,1814)
                                    PsiElement(,)(',')(1814,1815)
                                    PsiWhiteSpace(' ')(1815,1816)
                                    INVOCATION_ARG(1816,1831)
                                      NAMED_ARGS(1816,1831)
                                        PsiElement(identifier)('err')(1816,1819)
                                        PsiWhiteSpace(' ')(1819,1820)
                                        PsiElement(=)('=')(1820,1821)
                                        PsiWhiteSpace(' ')(1821,1822)
                                        VARIABLE_REFERENCE_EXPRESSION(1822,1831)
                                          SIMPLE_VARIABLE_REFERENCE(1822,1831)
                                            NAME_REFERENCE(1822,1831)
                                              PsiElement(identifier)('updateReq')(1822,1831)
                                  PsiElement())(')')(1831,1832)
                            PsiElement(;)(';')(1832,1833)
                      PsiWhiteSpace('\n        ')(1833,1842)
                      PsiElement(})('}')(1842,1843)
                PsiWhiteSpace('\n\n        ')(1843,1853)
                STATEMENT(1853,1885)
                  VARIABLE_DEFINITION_STATEMENT(1853,1885)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1853,1885)
                      PsiElement(var)('var')(1853,1856)
                      PsiWhiteSpace(' ')(1856,1857)
                      BINDING_PATTERN(1857,1863)
                        PsiElement(identifier)('result')(1857,1863)
                      PsiWhiteSpace(' ')(1863,1864)
                      PsiElement(=)('=')(1864,1865)
                      PsiWhiteSpace(' ')(1865,1866)
                      ACTION_INVOCATION_EXPRESSION(1866,1884)
                        ACTION_INVOCATION(1866,1884)
                          SIMPLE_VARIABLE_REFERENCE(1866,1870)
                            NAME_REFERENCE(1866,1870)
                              PsiElement(identifier)('conn')(1866,1870)
                          PsiElement(->)('->')(1870,1872)
                          FUNCTION_INVOCATION(1872,1884)
                            FUNCTION_NAME_REFERENCE(1872,1879)
                              ANY_IDENTIFIER_NAME(1872,1879)
                                PsiElement(identifier)('respond')(1872,1879)
                            PsiElement(()('(')(1879,1880)
                            INVOCATION_ARG_LIST(1880,1883)
                              INVOCATION_ARG(1880,1883)
                                VARIABLE_REFERENCE_EXPRESSION(1880,1883)
                                  SIMPLE_VARIABLE_REFERENCE(1880,1883)
                                    NAME_REFERENCE(1880,1883)
                                      PsiElement(identifier)('res')(1880,1883)
                            PsiElement())(')')(1883,1884)
                      PsiElement(;)(';')(1884,1885)
                PsiWhiteSpace('\n        ')(1885,1894)
                STATEMENT(1894,2125)
                  IF_ELSE_STATEMENT(1894,2125)
                    IF_CLAUSE(1894,2046)
                      PsiElement(if)('if')(1894,1896)
                      PsiWhiteSpace(' ')(1896,1897)
                      BRACED_OR_TUPLE_EXPRESSION(1897,1914)
                        TUPLE_LITERAL(1897,1914)
                          PsiElement(()('(')(1897,1898)
                          TYPE_TEST_EXPRESSION(1898,1913)
                            VARIABLE_REFERENCE_EXPRESSION(1898,1904)
                              SIMPLE_VARIABLE_REFERENCE(1898,1904)
                                NAME_REFERENCE(1898,1904)
                                  PsiElement(identifier)('result')(1898,1904)
                            PsiWhiteSpace(' ')(1904,1905)
                            PsiElement(is)('is')(1905,1907)
                            PsiWhiteSpace(' ')(1907,1908)
                            SIMPLE_TYPE_NAME(1908,1913)
                              REFERENCE_TYPE_NAME(1908,1913)
                                BUILT_IN_REFERENCE_TYPE_NAME(1908,1913)
                                  ERROR_TYPE_NAME(1908,1913)
                                    PsiElement(error)('error')(1908,1913)
                          PsiElement())(')')(1913,1914)
                      PsiWhiteSpace(' ')(1914,1915)
                      PsiElement({)('{')(1915,1916)
                      PsiWhiteSpace('\n            ')(1916,1929)
                      BLOCK(1929,2036)
                        STATEMENT(1929,2036)
                          EXPRESSION_STMT(1929,2036)
                            VARIABLE_REFERENCE_EXPRESSION(1929,2035)
                              FUNCTION_INVOCATION_REFERENCE(1929,2035)
                                FUNCTION_INVOCATION(1929,2035)
                                  FUNCTION_NAME_REFERENCE(1929,1943)
                                    PACKAGE_REFERENCE(1929,1933)
                                      PsiElement(identifier)('log')(1929,1932)
                                      PsiElement(:)(':')(1932,1933)
                                    ANY_IDENTIFIER_NAME(1933,1943)
                                      PsiElement(identifier)('printError')(1933,1943)
                                  PsiElement(()('(')(1943,1944)
                                  INVOCATION_ARG_LIST(1944,2034)
                                    INVOCATION_ARG(1944,1987)
                                      SIMPLE_LITERAL_EXPRESSION(1944,1987)
                                        SIMPLE_LITERAL(1944,1987)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Could not send response back to initiator"')(1944,1987)
                                    PsiElement(,)(',')(1987,1988)
                                    PsiWhiteSpace('\n                                 ')(1988,2022)
                                    INVOCATION_ARG(2022,2034)
                                      NAMED_ARGS(2022,2034)
                                        PsiElement(identifier)('err')(2022,2025)
                                        PsiWhiteSpace(' ')(2025,2026)
                                        PsiElement(=)('=')(2026,2027)
                                        PsiWhiteSpace(' ')(2027,2028)
                                        VARIABLE_REFERENCE_EXPRESSION(2028,2034)
                                          SIMPLE_VARIABLE_REFERENCE(2028,2034)
                                            NAME_REFERENCE(2028,2034)
                                              PsiElement(identifier)('result')(2028,2034)
                                  PsiElement())(')')(2034,2035)
                            PsiElement(;)(';')(2035,2036)
                      PsiWhiteSpace('\n        ')(2036,2045)
                      PsiElement(})('}')(2045,2046)
                    PsiWhiteSpace(' ')(2046,2047)
                    ELSE_CLAUSE(2047,2125)
                      PsiElement(else)('else')(2047,2051)
                      PsiWhiteSpace(' ')(2051,2052)
                      PsiElement({)('{')(2052,2053)
                      PsiWhiteSpace('\n            ')(2053,2066)
                      BLOCK(2066,2115)
                        STATEMENT(2066,2115)
                          EXPRESSION_STMT(2066,2115)
                            VARIABLE_REFERENCE_EXPRESSION(2066,2114)
                              FUNCTION_INVOCATION_REFERENCE(2066,2114)
                                FUNCTION_INVOCATION(2066,2114)
                                  FUNCTION_NAME_REFERENCE(2066,2079)
                                    PACKAGE_REFERENCE(2066,2070)
                                      PsiElement(identifier)('log')(2066,2069)
                                      PsiElement(:)(':')(2069,2070)
                                    ANY_IDENTIFIER_NAME(2070,2079)
                                      PsiElement(identifier)('printInfo')(2070,2079)
                                  PsiElement(()('(')(2079,2080)
                                  INVOCATION_ARG_LIST(2080,2113)
                                    INVOCATION_ARG(2080,2113)
                                      SIMPLE_LITERAL_EXPRESSION(2080,2113)
                                        SIMPLE_LITERAL(2080,2113)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Sent response back to initiator"')(2080,2113)
                                  PsiElement())(')')(2113,2114)
                            PsiElement(;)(';')(2114,2115)
                      PsiWhiteSpace('\n        ')(2115,2124)
                      PsiElement(})('}')(2124,2125)
                PsiWhiteSpace('\n    ')(2125,2130)
                PsiElement(})('}')(2130,2131)
          PsiWhiteSpace('\n')(2131,2132)
          PsiElement(})('}')(2132,2133)
  PsiWhiteSpace('\n\n')(2133,2135)
  PsiComment(LINE_COMMENT)('// The participant function that will get called when the distributed')(2135,2204)
  PsiWhiteSpace('\n')(2204,2205)
  PsiComment(LINE_COMMENT)('// transaction is aborted')(2205,2230)
  PsiWhiteSpace('\n')(2230,2231)
  DEFINITION(2231,2365)
    FUNCTION_DEFINITION(2231,2365)
      PsiElement(function)('function')(2231,2239)
      PsiWhiteSpace(' ')(2239,2240)
      CALLABLE_UNIT_SIGNATURE(2240,2283)
        ANY_IDENTIFIER_NAME(2240,2261)
          PsiElement(identifier)('printParticipantAbort')(2240,2261)
        PsiElement(()('(')(2261,2262)
        FORMAL_PARAMETER_LIST(2262,2282)
          PARAMETER(2262,2282)
            PARAMETER_WITH_TYPE(2262,2282)
              SIMPLE_TYPE_NAME(2262,2268)
                VALUE_TYPE_NAME(2262,2268)
                  PsiElement(string)('string')(2262,2268)
              PsiWhiteSpace(' ')(2268,2269)
              PsiElement(identifier)('transactionId')(2269,2282)
        PsiElement())(')')(2282,2283)
      PsiWhiteSpace(' ')(2283,2284)
      CALLABLE_UNIT_BODY(2284,2365)
        PsiElement({)('{')(2284,2285)
        PsiWhiteSpace('\n    ')(2285,2290)
        STATEMENT(2290,2363)
          EXPRESSION_STMT(2290,2363)
            VARIABLE_REFERENCE_EXPRESSION(2290,2362)
              FUNCTION_INVOCATION_REFERENCE(2290,2362)
                FUNCTION_INVOCATION(2290,2362)
                  FUNCTION_NAME_REFERENCE(2290,2303)
                    PACKAGE_REFERENCE(2290,2294)
                      PsiElement(identifier)('log')(2290,2293)
                      PsiElement(:)(':')(2293,2294)
                    ANY_IDENTIFIER_NAME(2294,2303)
                      PsiElement(identifier)('printInfo')(2294,2303)
                  PsiElement(()('(')(2303,2304)
                  INVOCATION_ARG_LIST(2304,2361)
                    INVOCATION_ARG(2304,2361)
                      BINARY_ADD_SUB_EXPRESSION(2304,2361)
                        BINARY_ADD_SUB_EXPRESSION(2304,2348)
                          SIMPLE_LITERAL_EXPRESSION(2304,2332)
                            SIMPLE_LITERAL(2304,2332)
                              PsiElement(QUOTED_STRING_LITERAL)('"Participated transaction: "')(2304,2332)
                          PsiWhiteSpace(' ')(2332,2333)
                          PsiElement(+)('+')(2333,2334)
                          PsiWhiteSpace(' ')(2334,2335)
                          VARIABLE_REFERENCE_EXPRESSION(2335,2348)
                            SIMPLE_VARIABLE_REFERENCE(2335,2348)
                              NAME_REFERENCE(2335,2348)
                                PsiElement(identifier)('transactionId')(2335,2348)
                        PsiWhiteSpace(' ')(2348,2349)
                        PsiElement(+)('+')(2349,2350)
                        PsiWhiteSpace(' ')(2350,2351)
                        SIMPLE_LITERAL_EXPRESSION(2351,2361)
                          SIMPLE_LITERAL(2351,2361)
                            PsiElement(QUOTED_STRING_LITERAL)('" aborted"')(2351,2361)
                  PsiElement())(')')(2361,2362)
            PsiElement(;)(';')(2362,2363)
        PsiWhiteSpace('\n')(2363,2364)
        PsiElement(})('}')(2364,2365)
  PsiWhiteSpace('\n\n')(2365,2367)
  PsiComment(LINE_COMMENT)('// The participant function that will get called when the distributed')(2367,2436)
  PsiWhiteSpace('\n')(2436,2437)
  PsiComment(LINE_COMMENT)('// transaction is committed')(2437,2464)
  PsiWhiteSpace('\n')(2464,2465)
  DEFINITION(2465,2602)
    FUNCTION_DEFINITION(2465,2602)
      PsiElement(function)('function')(2465,2473)
      PsiWhiteSpace(' ')(2473,2474)
      CALLABLE_UNIT_SIGNATURE(2474,2518)
        ANY_IDENTIFIER_NAME(2474,2496)
          PsiElement(identifier)('printParticipantCommit')(2474,2496)
        PsiElement(()('(')(2496,2497)
        FORMAL_PARAMETER_LIST(2497,2517)
          PARAMETER(2497,2517)
            PARAMETER_WITH_TYPE(2497,2517)
              SIMPLE_TYPE_NAME(2497,2503)
                VALUE_TYPE_NAME(2497,2503)
                  PsiElement(string)('string')(2497,2503)
              PsiWhiteSpace(' ')(2503,2504)
              PsiElement(identifier)('transactionId')(2504,2517)
        PsiElement())(')')(2517,2518)
      PsiWhiteSpace(' ')(2518,2519)
      CALLABLE_UNIT_BODY(2519,2602)
        PsiElement({)('{')(2519,2520)
        PsiWhiteSpace('\n    ')(2520,2525)
        STATEMENT(2525,2600)
          EXPRESSION_STMT(2525,2600)
            VARIABLE_REFERENCE_EXPRESSION(2525,2599)
              FUNCTION_INVOCATION_REFERENCE(2525,2599)
                FUNCTION_INVOCATION(2525,2599)
                  FUNCTION_NAME_REFERENCE(2525,2538)
                    PACKAGE_REFERENCE(2525,2529)
                      PsiElement(identifier)('log')(2525,2528)
                      PsiElement(:)(':')(2528,2529)
                    ANY_IDENTIFIER_NAME(2529,2538)
                      PsiElement(identifier)('printInfo')(2529,2538)
                  PsiElement(()('(')(2538,2539)
                  INVOCATION_ARG_LIST(2539,2598)
                    INVOCATION_ARG(2539,2598)
                      BINARY_ADD_SUB_EXPRESSION(2539,2598)
                        BINARY_ADD_SUB_EXPRESSION(2539,2583)
                          SIMPLE_LITERAL_EXPRESSION(2539,2567)
                            SIMPLE_LITERAL(2539,2567)
                              PsiElement(QUOTED_STRING_LITERAL)('"Participated transaction: "')(2539,2567)
                          PsiWhiteSpace(' ')(2567,2568)
                          PsiElement(+)('+')(2568,2569)
                          PsiWhiteSpace(' ')(2569,2570)
                          VARIABLE_REFERENCE_EXPRESSION(2570,2583)
                            SIMPLE_VARIABLE_REFERENCE(2570,2583)
                              NAME_REFERENCE(2570,2583)
                                PsiElement(identifier)('transactionId')(2570,2583)
                        PsiWhiteSpace(' ')(2583,2584)
                        PsiElement(+)('+')(2584,2585)
                        PsiWhiteSpace(' ')(2585,2586)
                        SIMPLE_LITERAL_EXPRESSION(2586,2598)
                          SIMPLE_LITERAL(2586,2598)
                            PsiElement(QUOTED_STRING_LITERAL)('" committed"')(2586,2598)
                  PsiElement())(')')(2598,2599)
            PsiElement(;)(';')(2599,2600)
        PsiWhiteSpace('\n')(2600,2601)
        PsiElement(})('}')(2601,2602)
